<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Report Progress</title>
    <link rel="stylesheet" href="/static/css/chart.css" />
    <link rel="stylesheet" href="/static/css/style.css" />
    <link rel="stylesheet" href="/static/css/community.css" />
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />

    <!-- bootstrap core css -->
    <link rel="stylesheet" type="text/css" href="/static/css/bootstrap.css" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
    <!-- fonts style -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet" />

    <!-- owl slider stylesheet -->
    <link rel="stylesheet" type="text/css"
        href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" />

    <!-- font awesome style -->
    <link href="/static/css/font-awesome.min.css" rel="stylesheet" />
    <!-- nice select -->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/css/nice-select.min.css"
        integrity="sha256-mLBIhmBvigTFWPSCtvdu6a76T+3Xyt+K571hupeFLg4=" crossorigin="anonymous" />
    <!-- datepicker -->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/css/datepicker.css" />
    <!-- Custom styles for this template -->
    <link href="/static/css/style.css" rel="stylesheet" />
    <link href="/static/css/community.css" rel="stylesheet" />
    <!-- responsive style -->
    <link href="/static/css/responsive.css" rel="stylesheet" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>

<body style="background-color: #00c6a9">
    <div class="hero_area">
        <!-- header section starts -->
        <header class="header_section">
            <div class="header_bottom">
                <div class="container-fluid d-flex justify-content-between align-items-center">
                    <a href="/" class="logo-nugibot">
                        <h2 style="
                  font-family: 'caveat', cursive;
                  font-weight: bold;
                  padding-right: 50px;
                ">
                            NuGiBot
                        </h2>
                    </a>
                    <nav class="navbar navbar-expand-lg custom_nav-container" style="
                height: 60px;
                width: 50%;
                margin-right: 300px;
                display: flex;
                border-radius: 40px;
                background-color: #00c6a9;
              ">
                        <button class="navbar-toggler" type="button" data-toggle="collapse"
                            data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                            aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="navbarSupportedContent">
                            <ul class="navbar-nav mx-auto">
                                <li class="nav-item">
                                    <a class="nav-link" href="/">
                                        <i class="fa fa-home"></i>
                                        <span class="nav-text"></span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="/about">
                                        <i class="fa fa-info-circle"></i>
                                        <span class="nav-text"></span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="/community">
                                        <i class="fa fa-robot"></i>
                                        <span class="nav-text"></span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="/team">
                                        <i class="fa fa-users"></i>
                                        <span class="nav-text"></span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="/testimonial">
                                        <i class="fa fa-comments"></i>
                                        <span class="nav-text"></span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="/contact">
                                        <i class="fa fa-envelope"></i>
                                        <span class="nav-text"></span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </nav>
                </div>
            </div>
        </header>

        <!-- client section -->
        <section class="community layout-padding">
            <div class="container">
                <div class="row" style="margin-right: 0px">
                    <div class="col-md-4 col-lg-3 mb-2" style="left: -30px">
                        <div class="menu flex-row justify-content-between align-items-center">
                            <!-- NuGiBot -->
                            <icon class="material-symbols-outlined" onclick="toggleMenu()">menu</icon>
                        </div>
                        <nav class="nav flex-column sidebar" id="sidebar">
                            <!-- Community Collapse -->
                            <div class="sb-sidenav-menu-heading" style="
                    margin-bottom: 10px;
                    margin-top: 10px;
                    font-size: 0.8rem;
                    font-weight: bold;
                    text-transform: uppercase;
                    color: rgb(150, 149, 149);
                  ">
                                menu
                            </div>
                            <button style="justify-content: center" class="nav-link d-flex align-items-center active"
                                type="button" data-toggle="collapse" data-target="#collapseCommunity"
                                aria-expanded="false" aria-controls="collapseCommunity">
                                <icon class=""></icon>
                                Community
                            </button>
                            <div class="collapse" id="collapseCommunity">
                                <a href="/community/vegan" class="nav-link d-flex align-items-center">
                                    <icon class="mr-2 material-symbols-outlined">spa</icon>
                                    Vegan
                                </a>
                                <a href="/community/diet" class="nav-link d-flex align-items-center">
                                    <icon class="mr-2 material-symbols-outlined">no_meals</icon>
                                    Diet
                                </a>

                            </div>
                            <!-- Features Collapse -->
                            <!-- Features -->
                            <button style="justify-content: center; margin-top: 10px"
                                class="nav-link d-flex align-items-center active" type="button" data-toggle="collapse"
                                data-target="#collapseFeatures" aria-expanded="false" aria-controls="collapseFeatures">
                                <icon class=""></icon>
                                Features
                            </button>
                            <div class="collapse" id="collapseFeatures">
                                <a href="/chatbot" class="nav-link d-flex align-items-center">
                                    <i class="fas fa-robot mr-2"></i>
                                    Chat with NuGiBot
                                </a>
                                <a href="/chart" class="nav-link d-flex align-items-center">
                                    <icon class="mr-2 material-symbols-outlined">show_chart</icon>
                                    Report Progress
                                </a>
                                <a href="/track" class="nav-link d-flex align-items-center">
                                    <icon class="mr-2 material-symbols-outlined">bar_chart</icon>
                                    Food Track
                                </a>
                                <a href="#" class="nav-link d-flex align-items-center" data-bs-toggle="modal"
                                    data-bs-target="#exampleModal">
                                    <icon class="mr-2 material-symbols-outlined">date_range</icon>
                                    Reminder
                                </a>

                                <!-- modal  -->
                                <div class="modal fade" id="exampleModal" tabindex="-1"
                                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title fs-5" id="exampleModalLabel">Peringatan Kalorimu
                                                </h5>
                                                <button
                                                    style="padding: .5em; background: none; border: none; color: gray; border-radius: .3em; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center;"
                                                    type="button" class="btn-close" data-bs-dismiss="modal"
                                                    aria-label="Close">
                                                    <i class="material-symbols-outlined m-0">close</i>
                                                </button>
                                            </div>
                                            <div class="modal-body">
                                                Hai, kamu sudah berada di batas kalori harianmu. Mungkin kamu ingin
                                                membatalkan makanan ini?
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary"
                                                    data-bs-dismiss="modal">Close</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <script
                                    src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
                                    crossorigin="anonymous"></script>
                                <a href="/history" class="nav-link d-flex align-items-center">
                                    <icon class="mr-2 material-symbols-outlined">monitor_heart</icon>
                                    Medical History
                                </a>
                                <a href="/calculator" class="nav-link d-flex align-items-center">
                                    <icon class="mr-2 material-symbols-outlined">calculate</icon>
                                    Weight Calculator
                                </a>
                            </div>

                            <!-- Article -->
                            <button style="justify-content: center; margin-top: 10px"
                                class="nav-link d-flex align-items-center active" type="button" data-toggle="collapse"
                                data-target="#collapseArticle" aria-expanded="false" aria-controls="collapseArticle">
                                <icon class=""></icon>
                                Article
                            </button>
                            <div class="collapse" id="collapseArticle">
                                <a href="/article" class="nav-link d-flex align-items-center">
                                    <i class="fas fa-columns mr-2"></i>
                                    Article
                                </a>
                            </div>
                        </nav>
                    </div>

                    <!-- Main content -->
                    <div class="col-xl-8 col-lg-3 col-md-2 col-sm-10"
                        style="margin-top: 0px; left: -65px; margin-bottom: 20px">
                        <div style="border: 1px solid; border-radius: 10px; width: 125%">
                            <div class="card-body" style="border-radius: 30px">
                                <h3 style="font-family: cursive">Food Chart</h3>
                                <div class="row">
                                    <div class="col-md-3 col-sm-12">
                                        <label for="dataType">Show</label>
                                        <select id="dataType" class="form-control">
                                            <option value="kalori">Calorie</option>
                                            <option value="gizi">Nutrition</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3 col-sm-12">
                                        <label for="timeRange">Range:</label>
                                        <select id="timeRange" class="form-control">
                                            <option value="hari">Day</option>
                                            <option value="bulan">Month</option>
                                            <option value="tahun">Year</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3 col-sm-12">
                                        <label for="startDate">From:</label>
                                        <input type="date" id="startDate" class="form-control" style="margin: 0;" />
                                    </div>
                                    <div class="col-md-3 col-sm-12">
                                        <label for="endDate">To:</label>
                                        <input type="date" id="endDate" class="form-control" style="margin: 0;" />
                                    </div>
                                </div>
                                </h3>
                            </div>
                            <div class="card-body">
                                <canvas id="myAreaChart" width="100%" height="30"></canvas>
                                <canvas id="chartGizi" width="400" height="30"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                <script>
                // Global variables to store data
                let dataKalori = [];
                let dataGizi = [];
                let myChart;

                // Function to parse Django date format
                function parseDjangoDate(dateString) {
                    // Convert "DD Month YYYY HH:mm" to "YYYY-MM-DD"
                    const parts = dateString.split(' ');
                    const months = {
                        'January': '01', 'February': '02', 'March': '03', 'April': '04',
                        'May': '05', 'June': '06', 'July': '07', 'August': '08',
                        'September': '09', 'October': '10', 'November': '11', 'December': '12'
                    };
                    
                    const day = parts[0].padStart(2, '0');
                    const month = months[parts[1]];
                    const year = parts[2];
                    
                    return `${year}-${month}-${day}`;
                }

                // Fetch data from API
                async function fetchData(searchQuery = '') {
                    try {
                        let url = '/api/food_track/list';
                        if (searchQuery) {
                            url += `?search=\${encodeURIComponent(searchQuery)}`;
                        }
                        
                        const loadingIndicator = document.getElementById('loadingIndicator');
                        if (loadingIndicator) loadingIndicator.style.display = 'block';
                        
                        const response = await fetch(url);
                        if (!response.ok) {
                            throw new Error('Network response was not ok');
                        }
                        const data = await response.json();
                        
                        // Process the data into the format needed for charts
                        const processedData = processApiData(data);
                        dataKalori = processedData.kalori;
                        dataGizi = processedData.gizi;
                        
                        if (loadingIndicator) loadingIndicator.style.display = 'none';
                        return processedData;
                    } catch (error) {
                        console.error('Error fetching data:', error);
                        const errorMessage = document.getElementById('errorMessage');
                        if (errorMessage) {
                            errorMessage.textContent = 'Error loading data. Please try again later.';
                            errorMessage.style.display = 'block';
                        }
                        if (loadingIndicator) loadingIndicator.style.display = 'none';
                        return null;
                    }
                }

                // Process API data into chart format
                function processApiData(apiData) {
                    // Group data by date
                    const groupedData = apiData.reduce((acc, item) => {
                        const date = parseDjangoDate(item.time); // Convert Django date format to YYYY-MM-DD
                        
                        if (!acc[date]) {
                            acc[date] = {
                                kalori: 0,
                                protein: 0,
                                sugar: 0,
                                fiber: 0,
                                count: 0
                            };
                        }
                        
                        acc[date].kalori += item.calorie;
                        acc[date].protein += item.protein;
                        acc[date].sugar += item.sugar;
                        acc[date].fiber += item.fiber;
                        acc[date].count += 1;
                        
                        return acc;
                    }, {});

                    // Convert grouped data into arrays for charts
                    const kaloriData = [];
                    const giziData = [];

                    Object.entries(groupedData).forEach(([date, values]) => {
                        kaloriData.push({
                            tanggal: date,
                            kalori: values.kalori
                        });

                        giziData.push({
                            tanggal: date,
                            protein: values.protein,
                            gula: values.sugar,
                            serat: values.fiber
                        });
                    });

                    // Sort data by date
                    const sortByDate = (a, b) => new Date(a.tanggal) - new Date(b.tanggal);
                    return {
                        kalori: kaloriData.sort(sortByDate),
                        gizi: giziData.sort(sortByDate)
                    };
                }

                // Format date for display
                function formatDate(dateString) {
                    const date = new Date(dateString);
                    const options = {
                        day: "numeric",
                        month: "short",
                        year: "numeric",
                    };
                    return date.toLocaleDateString("id-ID", options);
                }

                // Render chart function
                function renderChart(filteredData, dataType) {
                    const ctx = document.getElementById("myAreaChart").getContext("2d");
                    const labels = filteredData.map((item) => formatDate(item.tanggal));
                    
                    const datasets = dataType === "kalori"
                        ? [
                            {
                                label: "Calories of your food",
                                data: filteredData.map((item) => item.kalori),
                                borderColor: "rgba(75, 192, 192, 1)",
                                backgroundColor: "rgba(75, 192, 192, 0.2)",
                                borderWidth: 2,
                                fill: true,
                                tension: 0.4,
                            },
                        ]
                        : [
                            {
                                label: "Protein",
                                data: filteredData.map((item) => item.protein),
                                backgroundColor: "rgba(255, 99, 132, 0.5)",
                                borderColor: "rgba(255, 99, 132, 1)",
                                borderWidth: 2,
                            },
                            {
                                label: "Sugar",
                                data: filteredData.map((item) => item.gula),
                                backgroundColor: "rgba(54, 162, 235, 0.5)",
                                borderColor: "rgba(54, 162, 235, 1)",
                                borderWidth: 2,
                            },
                            {
                                label: "Fiber",
                                data: filteredData.map((item) => item.serat),
                                backgroundColor: "rgba(255, 206, 86, 0.5)",
                                borderColor: "rgba(255, 206, 86, 1)",
                                borderWidth: 2,
                            },
                        ];

                    const chartType = dataType === "kalori" ? "line" : "bar";

                    if (myChart) {
                        myChart.destroy();
                    }

                    myChart = new Chart(ctx, {
                        type: chartType,
                        data: { labels, datasets },
                        options: {
                            responsive: true,
                            scales: {
                                x: { 
                                    title: { display: false }, 
                                    grid: { display: false } 
                                },
                                y: { 
                                    title: { 
                                        display: true, 
                                        text: dataType === "kalori" ? "Calories" : "Nutrition (g)" 
                                    }, 
                                    beginAtZero: true 
                                },
                            },
                            plugins: {
                                legend: {
                                    display: true,
                                    position: 'top'
                                },
                                tooltip: {
                                    mode: 'index',
                                    intersect: false
                                }
                            }
                        },
                    });
                }

                // Filter data based on user selection
                async function filterData() {
                    const dataType = document.getElementById("dataType").value;
                    const timeRange = document.getElementById("timeRange").value;
                    const startDate = document.getElementById("startDate").value;
                    const endDate = document.getElementById("endDate").value;
                    const searchQuery = document.getElementById("searchInput")?.value || '';

                    // Fetch filtered data from API
                    const data = await fetchData(searchQuery);
                    if (!data) return;

                    let filteredData = dataType === "kalori" ? data.kalori : data.gizi;

                    // Filter by date range
                    if (startDate && endDate) {
                        filteredData = filteredData.filter((item) => {
                            const itemDate = new Date(item.tanggal);
                            return itemDate >= new Date(startDate) && itemDate <= new Date(endDate);
                        });
                    }

                    // Apply time range aggregation
                    if (timeRange === "bulan") {
                        filteredData = filteredData.reduce((acc, curr) => {
                            const month = curr.tanggal.slice(0, 7); // YYYY-MM
                            const existing = acc.find((item) => item.tanggal.startsWith(month));
                            if (existing) {
                                if (dataType === "kalori") {
                                    existing.kalori += curr.kalori;
                                } else {
                                    existing.protein += curr.protein;
                                    existing.gula += curr.gula;
                                    existing.serat += curr.serat;
                                }
                            } else {
                                acc.push(
                                    dataType === "kalori"
                                        ? { tanggal: month + '-01', kalori: curr.kalori }
                                        : { 
                                            tanggal: month + '-01', 
                                            protein: curr.protein, 
                                            gula: curr.gula, 
                                            serat: curr.serat 
                                        }
                                );
                            }
                            return acc;
                        }, []);
                    } else if (timeRange === "tahun") {
                        filteredData = filteredData.reduce((acc, curr) => {
                            const year = curr.tanggal.slice(0, 4); // YYYY
                            const existing = acc.find((item) => item.tanggal.startsWith(year));
                            if (existing) {
                                if (dataType === "kalori") {
                                    existing.kalori += curr.kalori;
                                } else {
                                    existing.protein += curr.protein;
                                    existing.gula += curr.gula;
                                    existing.serat += curr.serat;
                                }
                            } else {
                                acc.push(
                                    dataType === "kalori"
                                        ? { tanggal: year + '-01-01', kalori: curr.kalori }
                                        : { 
                                            tanggal: year + '-01-01', 
                                            protein: curr.protein, 
                                            gula: curr.gula, 
                                            serat: curr.serat 
                                        }
                                );
                            }
                            return acc;
                        }, []);
                    }

                    console.log(filteredData);
                    renderChart(filteredData, dataType);
                }

                // Debounce function for search input
                function debounce(func, wait) {
                    let timeout;
                    return function executedFunction(...args) {
                        const later = () => {
                            clearTimeout(timeout);
                            func(...args);
                        };
                        clearTimeout(timeout);
                        timeout = setTimeout(later, wait);
                    };
                }

                async function fetchCalorieMetrics() {
                    try {
                        const response = await fetch('/api/food_track/calculate_calorie_metrics');
                        const data = await response.json();
                        
                        // Update UI elements using getElementById
                        document.getElementById('calorie-limit-today').textContent = `${data.calorie_limit_day} Kcal`;
                        document.getElementById('calorie-for-the-day').textContent = `${data.calories_day} Kcal`;
                        document.getElementById('calorie-limit-for-the-month').textContent = `${data.calorie_limit_month} Kcal`;
                        document.getElementById('calorie-for-the-month').textContent = `${data.calories_month} Kcal`;
                    } catch (error) {
                        console.error('Error fetching calorie metrics:', error);
                    }
                }

                class RecommendationManager {
                    constructor() {
                        this.eventSource = null;
                    }

                    setupEventSource() {
                        this.eventSource = new EventSource('/api/stream-recommendations');
                        
                        this.eventSource.onmessage = (event) => {
                            const data = JSON.parse(event.data);
                            this.updateRecommendation(data.type, data.content);
                        };

                        this.eventSource.onerror = (error) => {
                            console.error('EventSource failed:', error);
                            this.eventSource.close();
                        };
                    }

                    updateRecommendation(type, content) {
                        const elementMap = {
                            'daily_total': 'total-daily-recommendations',
                            'monthly_total': 'monthly-total-recommendations',
                            'daily_limit': 'recommended-daily-limit',
                            'monthly_limit': 'recommended-monthly-limit'
                        };

                        const element = document.getElementById(elementMap[type]);
                        if (element) {
                            // Animate the text update
                            element.style.opacity = '0';
                            setTimeout(() => {
                                element.textContent = content;
                                element.style.opacity = '1';
                            }, 300);
                        }
                    }

                    start() {
                        this.setupEventSource();
                    }

                    stop() {
                        if (this.eventSource) {
                            this.eventSource.close();
                        }
                    }
                }

                // Clean up when leaving the page
                window.addEventListener('beforeunload', () => {
                    if (recommendationManager) {
                        recommendationManager.stop();
                    }
                });

                // Event listeners
                document.addEventListener("DOMContentLoaded", () => {
                    const recommendationManager = new RecommendationManager();
                    recommendationManager.start();

                    fetchCalorieMetrics();

                    // Initial data load
                    fetchData().then(() => {
                        console.log(dataKalori);
                        renderChart(dataKalori, "kalori");
                    });

                    // Add event listeners to filter controls
                    document.getElementById("dataType").addEventListener("change", filterData);
                    document.getElementById("timeRange").addEventListener("change", filterData);
                    document.getElementById("startDate").addEventListener("change", filterData);
                    document.getElementById("endDate").addEventListener("change", filterData);

                    // Add search input listener if search input exists
                    const searchInput = document.getElementById("searchInput");
                    if (searchInput) {
                        searchInput.addEventListener("input", debounce(() => {
                            filterData();
                        }, 300));
                    }
                });
                </script>
                <!-- </div> -->
                <!-- </div>
            </div>
            </div> -->
            </div>
            <div class="col-md-8 col-lg-9" style="margin-top: 0; left: 270px">
                <div class="row">
                    <!-- Chart Wrapper 1 -->
                    <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12">
                        <div class="chart-wrapper" style="border-left: 6px solid var(--primary1)">
                            <div class="row d-flex align-items-center justify-content-between">
                                <div class="col-10">
                                    <div class="card-1-body mb-3">Your Calories for the Month</div>
                                    <div id="calorie-for-the-month" class="card-1-footer">7000 Kcal</div>
                                </div>
                                <div class="col-2" style="left: -20px">
                                    <div class="card-1-body">
                                        <i class="material-symbols-outlined" style="
                          left: -50px;
                          font-size: 2em;
                          color: rgba(0, 0, 0, 0.2);
                        ">restaurant</i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Chart Wrapper 2 -->
                    <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12">
                        <div class="chart-wrapper" style="border-left: 6px solid var(--danger)">
                            <div class="row d-flex align-items-center justify-content-between">
                                <div class="col-10">
                                    <div class="card-1-body mb-3">Your Calorie Limit for the Month</div>
                                    <div id="calorie-limit-for-the-month" class="card-1-footer">75000 Kcal</div>
                                </div>
                                <div class="col-2" style="left: -20px">
                                    <div class="card-1-body">
                                        <i class="material-symbols-outlined"
                                            style="font-size: 2em; color: rgba(0, 0, 0, 0.2)">warning</i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Chart Wrapper 3 -->
                    <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12">
                        <div class="chart-wrapper" style="border-left: 6px solid var(--success)">
                            <div class="row d-flex align-items-center justify-content-between">
                                <div class="col-10">
                                    <div class="card-1-body mb-3">Your Calories for the Day</div>
                                    <div id="calorie-for-the-day" class="card-1-footer">75000 Kcal</div>
                                </div>
                                <div class="col-2" style="left: -20px">
                                    <div class="card-1-body">
                                        <i class="material-symbols-outlined"
                                            style="font-size: 2em; color: rgba(0, 0, 0, 0.2)">ramen_dining</i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Chart Wrapper 4 -->
                    <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12">
                        <div class="chart-wrapper" style="border-left: 6px solid var(--warning)">
                            <div class="row d-flex align-items-center justify-content-between">
                                <div class="col-10">
                                    <div class="card-1-body mb-3">Your Calorie Limit Today</div>
                                    <div id="calorie-limit-today" class="card-1-footer">75000 Kcal</div>
                                </div>
                                <div class="col-2" style="left: -20px">
                                    <div class="card-1-body">
                                        <i class="material-symbols-outlined"
                                            style="font-size: 2em; color: rgba(0, 0, 0, 0.2)">emergency_home</i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <h3 style="font-family: cursive; margin-top: 20px">
                    CALORIE REDUCTION RECOMMENDATION
                </h3>
                <div class="row">
                    <!-- Chart Wrapper 1 -->
                    <div class="col-xl-6 col-lg-3 col-md-6 col-sm-12">
                        <div class="chart-wrapper" style="border-left: 6px solid var(--primary1)">
                            <div class="row d-flex align-items-center justify-content-between">
                                <div class="col-10">
                                    <div class="card-1-body mb-3">
                                        Total Daily Calorie Recommendations
                                    </div>
                                    <div id="total-daily-recommendations" class="card-1-footer">
                                        Loading...
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Chart Wrapper 2 -->
                    <div class="col-xl-6 col-lg-3 col-md-6 col-sm-12">
                        <div class="chart-wrapper" style="border-left: 6px solid var(--danger)">
                            <div class="row d-flex align-items-center justify-content-between">
                                <div class="col-10">
                                    <div class="card-1-body mb-3">
                                        Recommended Daily Calorie Limit
                                    </div>
                                    <div id="monthly-total-recommendations" class="card-1-footer">
                                        Loading...
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Chart Wrapper 3 -->
                    <div class="col-xl-6 col-lg-3 col-md-6 col-sm-12" style="margin-top: 10px">
                        <div class="chart-wrapper" style="border-left: 6px solid var(--success)">
                            <div class="row d-flex align-items-center justify-content-between">
                                <div class="col-10">
                                    <div class="card-1-body mb-3">
                                        Monthly Total Calorie Recommendation
                                    </div>
                                    <div id="recommended-daily-limit" class="card-1-footer">
                                        Loading...
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Chart Wrapper 4 -->
                    <div class="col-xl-6 col-lg-3 col-md-6 col-sm-12" style="margin-top: 10px; margin-bottom: 30px">
                        <div class="chart-wrapper" style="border-left: 6px solid var(--warning)">
                            <div class="row d-flex align-items-center justify-content-between">
                                <div class="col-10">
                                    <div class="card-1-body mb-3">
                                        Recommended Monthly Calorie Limit
                                    </div>
                                    <div id="recommended-monthly-limit" class="card-1-footer">
                                        Loading...
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
    <script src="/static/js/chart1.js"></script>
    <script src="/static/js/chart2.js"></script>
    <script>
        function toggleMenu() {
            var sidebar = document.getElementById("sidebar");
            if (sidebar.style.display === "none" || sidebar.style.display === "") {
                sidebar.style.display = "block";
            } else {
                sidebar.style.display = "none";
            }
        }
    </script>
</body>

</html>